{% comment %}
  Language Selector Snippet
  Renders language selector dropdown
  Accepts: form_id - unique identifier for the form to avoid duplicate IDs
{% endcomment %}

{%- assign form_id = form_id | default: 'LanguageForm' -%}

{%- form 'localization', id: form_id, class: 'localization-form' -%}
  <div class="no-js-hidden">
    <select
      name="locale_code"
      id="language-selector-{{ form_id | handleize }}"
      class="image-select center style-default type-languages"
      aria-labelledby="LanguageLabel"
    >
      {%- assign current_language = localization.language.iso_code -%}
      {%- for language in localization.available_languages -%}
        <option
          value="{{ language.iso_code }}"
          {% if language.iso_code == current_language %}
            selected
          {% endif %}
        >
          {{ language.endonym_name | capitalize }}
        </option>
      {%- endfor -%}
    </select>
  </div>
  <input type="hidden" name="return_to" value="{{ request.path }}">
{%- endform -%}
