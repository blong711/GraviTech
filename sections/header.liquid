{% liquid
  assign layout_type = section.settings.layout_type
  assign show_categories = section.settings.show_categories
  assign categories_style = ''
  assign header_classes = 'header-default header-search header-uppercase'
  assign bottom_classes = 'header-bottom d-none d-xl-block line-bt'

  case layout_type
    when 'electric'
      assign header_classes = header_classes | append: ' header-style-2'
      assign categories_style = ''
    when 'mega'
      assign bottom_classes = bottom_classes | append: ' bg-light-purple-11'
      assign show_categories = false
    when 'market'
      assign header_classes = header_classes | append: ' header-style-2'
      assign categories_style = ' style-market'
  endcase
%}

<header
  id="header"
  class="{{ header_classes }} color-{{ section.settings.color_scheme }}"
  data-sticky-type="{{ section.settings.sticky_header }}"
>
  <!-- Predictive Search Settings -->
  <meta name="predictive-search-enabled" content="{{ settings.predictive_search_enabled }}">
  <meta name="predictive-search-show-price" content="{{ settings.predictive_search_show_price }}">
  <!-- Header Top -->
  <div class="header-top">
    <div class="container">
      <div class="row wrapper-header align-items-center">
        <!-- Mobile Menu Button -->
        <div class="col-md-4 col-3 d-xl-none">
          <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
            <i class="icon icon-categories1"></i>
          </a>
        </div>

        <!-- Logo -->
        <div class="col-xl-3 col-md-4 col-6">
          <a href="{{ routes.root_url }}" class="logo-header">
            {% if settings.logo != blank %}
              {% assign logo_width = settings.logo_width %}
              {{
                settings.logo
                | image_url: width: logo_width
                | image_tag: class: 'logo', width: logo_width, height: 'auto', alt: shop.name
              }}
            {% else %}
              <span class="h2">{{ shop.name }}</span>
            {% endif %}
          </a>
        </div>

        <!-- Search Form -->
        {% if section.settings.show_search %}
          <div class="col-xl-5 d-none d-xl-block text-center">
            <div class="tf-form-search">
              <form class="form-search" action="{{ routes.search_url }}" method="get">
                <input
                  type="text"
                  name="q"
                  value="{{ search.terms | escape }}"
                  placeholder="{{ section.settings.search_placeholder }}"
                  tabindex="0"
                  aria-required="true"
                  required
                >
                <button type="submit" class="btn-search">
                  <i class="icon icon-search"></i>
                </button>
              </form>

                             
            </div>
          </div>
        {% endif %}

        <!-- Header Icons -->
        <div class="col-xl-4 col-md-4 col-3">
          <ul class="nav-icon d-flex justify-content-end align-items-center">
            {% if section.settings.show_account %}
              <li class="nav-account">
                {% if customer %}
                  <a href="{{ routes.account_url }}" class="nav-icon-item">
                    <i class="icon icon-user"></i>
                    <span class="text d-none d-xl-block">{{ 'customer.account.title' | t }}</span>
                  </a>
                {% else %}
                  <a href="#login" class="nav-icon-item" data-bs-toggle="offcanvas">
                    <i class="icon icon-user"></i>
                    <span class="text d-none d-xl-block">{{ 'customer.login.title' | t }}</span>
                  </a>
                {% endif %}
              </li>
            {% endif %}

            {% if section.settings.show_wishlist %}
              <li class="nav-wishlist">
                <a href="/pages/wishlist" class="nav-icon-item">
                  <i class="icon icon-heart"></i>
                  <span class="text d-none d-xl-block">{{ 'general.wishlist.title' | t }}</span>
                </a>
              </li>
            {% endif %}

            {% if section.settings.show_cart %}
              <li class="nav-cart">
                {% if layout_type == 'mega' or layout_type == 'market' %}
                  <a href="#shoppingCart" class="nav-icon-item" data-bs-toggle="offcanvas">
                    <i class="icon icon-cart"></i>
                    <span class="text d-none d-xl-block">{{ cart.total_price | money }}</span>
                  </a>
                {% else %}
                  <a href="#shoppingCart" class="nav-icon-item" data-bs-toggle="offcanvas">
                    <i class="icon icon-cart"></i>
                    <span class="text d-none d-xl-block">{{ 'general.cart.title' | t }}</span>
                  </a>
                {% endif %}
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Header Bottom Navigation -->
  <div class="{{ bottom_classes }}">
    <div class="container">
      <div class="wrapper-header-bottom">
        {% if layout_type == 'mega' %}
          <!-- Mega Layout: Full-width navigation only -->
          <nav class="box-navigation text-center">
            {% render 'header-navigation', menu: section.settings.main_menu, section: section %}
          </nav>

          <div class="inner-right">
            {% if section.settings.help_text %}
              <a href="{{ section.settings.help_url | default: '/pages/contact' }}" class="link fw-medium text-md">
                {{ section.settings.help_text }}
              </a>
            {% endif %}
            {% if section.settings.phone_number %}
              <div class="box-phone">
                <i class="icon icon-head-phone"></i>
                <a href="tel:{{ section.settings.phone_number }}" class="phone">
                  {{ section.settings.phone_display | default: section.settings.phone_number }}
                </a>
              </div>
            {% endif %}
          </div>

        {% elsif layout_type == 'market' %}
          <!-- Market Layout: Categories + Navigation on left, Big phone on right -->
          <div class="inner-left">
            {% if show_categories %}
              <div class="tf-mega-categories{{ categories_style }}">
                <a href="{{ routes.collections_url }}" class="categories-title">
                  <i class="icon icon-categories"></i>
                  {{ section.settings.categories_title }}
                </a>
                <ul class="mega-categories">
                  {% for collection in section.settings.selected_collections %}
                    <li>
                      <a href="{{ collection.url }}" class="cate-item">
                        {% if collection.image %}
                          <div class="img">
                            {{
                              collection.image
                              | image_url: width: 50
                              | image_tag: loading: 'lazy', alt: collection.title
                            }}
                          </div>
                        {% endif %}
                        <span class="name-cate">{{ collection.title }}</span>
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

            <nav class="box-navigation text-center">
              {% render 'header-navigation', menu: section.settings.main_menu, section: section %}
            </nav>
          </div>

          {% if section.settings.phone_number %}
            <div class="box-phone">
              <div class="box-icon">
                <i class="icon icon-head-phone"></i>
              </div>
              <a href="tel:{{ section.settings.phone_number }}" class="text-xl fw-medium">
                {{ section.settings.phone_display | default: section.settings.phone_number }}
              </a>
            </div>
          {% endif %}

        {% else %}
          <!-- Electric Layout: Categories + Navigation on left, Help + Call on right -->
          <div class="inner-left">
            {% if show_categories %}
              <div class="tf-mega-categories{{ categories_style }}">
                <a href="{{ routes.collections_url }}" class="categories-title">
                  <i class="icon icon-categories"></i>
                  {{ section.settings.categories_title }}
                </a>
                <ul class="mega-categories">
                  {% for collection in section.settings.selected_collections %}
                    <li>
                      <a href="{{ collection.url }}" class="cate-item">
                        {% if collection.image %}
                          <div class="img">
                            {{
                              collection.image
                              | image_url: width: 50
                              | image_tag: loading: 'lazy', alt: collection.title
                            }}
                          </div>
                        {% endif %}
                        <span class="name-cate">{{ collection.title }}</span>
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

            <nav class="box-navigation text-center">
              {% render 'header-navigation', menu: section.settings.main_menu, section: section %}
            </nav>
          </div>

          <div class="inner-right">
            {% if section.settings.help_text %}
              <a href="{{ section.settings.help_url | default: '/pages/contact' }}" class="link fw-medium text-md">
                {{ section.settings.help_text }}
              </a>
            {% endif %}
            {% if section.settings.phone_number %}
              <a href="tel:{{ section.settings.phone_number }}" class="call-us text-md fw-medium">
                {{ section.settings.call_text }}
                <i class="icon icon-arrow1-top-left"></i>
              </a>
            {% endif %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</header>

{%- style %}
  .wrapper-header-bottom .call-us,
  .bg-light-purple-11 .box-phone a {
    color: rgb(var(--color-foreground2)) !important;
  }

  .wrapper-header-bottom .call-us {
    border-bottom: 1px solid rgb(var(--color-foreground2)) !important;
  }

  .header-default .box-nav-menu .item-link,
  .header-default .box-phone .icon,
  .header-style-2 .box-phone a,
  .nav-account a,
  .nav-wishlist a,
  .nav-cart a {
    color: rgb(var(--color-foreground)) !important;
  }

  .wrapper-header-bottom .tf-mega-categories .categories-title,
  .header-default .box-phone .box-icon,
  .bg-light-purple-11 {
    background-color: rgba(var(--color-background2)) !important;
  }
{%- endstyle %}

{% schema %}
{
  "name": "t:sections.header.name",
  "tag": "header",
  "class": "section-header",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.header.settings.layout_configuration.content"
    },
    {
      "type": "select",
      "id": "layout_type",
      "label": "t:sections.header.settings.layout.label",
      "options": [
        { "value": "electric", "label": "t:sections.header.settings.layout_1" },
        { "value": "mega", "label": "t:sections.header.settings.layout_2" },
        { "value": "market", "label": "t:sections.header.settings.layout_3" }
      ],
      "default": "electric"
    },
    {
      "type": "select",
      "id": "sticky_header",
      "label": "t:sections.header.settings.sticky_header.label",
      "options": [
        {
          "value": "none",
          "label": "t:sections.header.settings.sticky_header.options.none"
        },
        {
          "value": "on_scroll_up",
          "label": "t:sections.header.settings.sticky_header.options.on_scroll_up"
        }
      ],
      "default": "on_scroll_up"
    },
    {
      "type": "range",
      "id": "menu_item_spacing",
      "label": "t:sections.header.settings.menu_spacing.label",
      "info": "t:sections.header.settings.menu_spacing.info",
      "unit": "px",
      "min": 0,
      "max": 48,
      "step": 2,
      "default": 16
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-9"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.navigation.content"
    },
    {
      "type": "link_list",
      "id": "main_menu",
      "label": "t:sections.header.settings.menu.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.categories_menu.content"
    },
    {
      "type": "checkbox",
      "id": "show_categories",
      "label": "t:sections.header.settings.show_categories_menu.label",
      "default": true
    },
    {
      "type": "text",
      "id": "categories_title",
      "label": "t:sections.header.settings.categories_title.label",
      "default": "t:sections.header.settings.categories_title.default"
    },
    {
      "type": "collection_list",
      "id": "selected_collections",
      "label": "t:sections.header.settings.selected_collections.label",
      "limit": 20
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.search.content"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "t:sections.header.settings.show_search.label",
      "default": true
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "t:sections.header.settings.search_placeholder.label",
      "default": "t:sections.header.settings.search_placeholder.default"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.utility_settings.content"
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "t:sections.header.settings.show_account.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "t:sections.header.settings.show_wishlist.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart",
      "label": "t:sections.header.settings.show_cart.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.contact_information.content"
    },
    {
      "type": "text",
      "id": "help_text",
      "label": "t:sections.header.settings.help_link_text.label",
      "default": "t:sections.header.settings.help_link_text.default"
    },
    {
      "type": "url",
      "id": "help_url",
      "label": "t:sections.header.settings.help_link_url.label"
    },
    {
      "type": "text",
      "id": "phone_number",
      "label": "t:sections.header.settings.phone_number.label",
      "placeholder": "t:sections.header.settings.phone_number.placeholder"
    },
    {
      "type": "text",
      "id": "call_text",
      "label": "t:sections.header.settings.call_us_text.label",
      "default": "t:sections.header.settings.call_us_text.default"
    }
  ],
  "blocks": [
    {
      "type": "mega_home",
      "name": "t:sections.header.blocks.mega_home.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_home.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_home.settings.menu_item_match.info"
        },
        {
          "type": "page",
          "id": "content_page",
          "label": "t:sections.header.blocks.mega_home.settings.content_page.label",
          "info": "t:sections.header.blocks.mega_home.settings.content_page.info"
        }
      ]
    },
    {
      "type": "mega_shop",
      "name": "t:sections.header.blocks.mega_shop.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_shop.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_shop.settings.menu_item_match.info"
        },
        {
          "type": "collection_list",
          "id": "collections",
          "label": "t:sections.header.blocks.mega_shop.settings.collections.label",
          "limit": 8,
          "info": "t:sections.header.blocks.mega_shop.settings.collections.info"
        },
        {
          "type": "text",
          "id": "view_all_text",
          "label": "t:sections.header.blocks.mega_shop.settings.view_all_text.label",
          "default": "t:sections.header.blocks.mega_shop.settings.view_all_text.default"
        },
        {
          "type": "url",
          "id": "view_all_url",
          "label": "t:sections.header.blocks.mega_shop.settings.view_all_url.label"
        }
      ]
    },
    {
      "type": "mega_product",
      "name": "t:sections.header.blocks.mega_product.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_product.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_product.settings.menu_item_match.info"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "t:sections.header.blocks.mega_product.settings.products.label",
          "limit": 4,
          "info": "t:sections.header.blocks.mega_product.settings.products.info"
        }
      ]
    },
    {
      "type": "mega_pages",
      "name": "t:sections.header.blocks.mega_pages.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_pages.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_pages.settings.menu_item_match.info"
        },
        {
          "type": "image_picker",
          "id": "banner_image",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_image.label"
        },
        {
          "type": "text",
          "id": "banner_title",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_title.label",
          "default": "t:sections.header.blocks.mega_pages.settings.banner_title.default"
        },
        {
          "type": "url",
          "id": "banner_url",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_url.label"
        }
      ]
    },
    {
      "type": "mega_blog",
      "name": "t:sections.header.blocks.mega_blog.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_blog.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_blog.settings.menu_item_match.info"
        },
        {
          "type": "header",
          "content": "t:sections.header.blocks.mega_blog.settings.recent_posts.content"
        },
        {
          "type": "text",
          "id": "recent_posts_title",
          "label": "t:sections.header.blocks.mega_blog.settings.recent_posts_title.label",
          "default": "t:sections.header.blocks.mega_blog.settings.recent_posts_title.default"
        },
        {
          "type": "blog",
          "id": "blog",
          "label": "t:sections.header.blocks.mega_blog.settings.blog.label",
          "info": "t:sections.header.blocks.mega_blog.settings.blog.info"
        },
        {
          "type": "range",
          "id": "posts_to_show",
          "label": "t:sections.header.blocks.mega_blog.settings.posts_to_show.label",
          "min": 3,
          "max": 6,
          "step": 1,
          "default": 3
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.header.presets.name",
      "settings": {
        "layout_type": "electric",
        "show_categories": true,
        "show_search": true,
        "show_account": true,
        "show_wishlist": true,
        "show_cart": true,
        "help_text": "t:sections.header.settings.help_link_text.default",
        "call_text": "t:sections.header.settings.call_us_text.default"
      }
    }
  ]
}
{% endschema %}
