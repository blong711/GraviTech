{% schema %}
{
  "name": "Tag Products Carousel",
  "settings": [
    {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "scheme-1"
    },
    {
        "type": "select",
        "id": "width",
        "label": "t:sections.offer_banner.settings.width.label",
        "options": [
            {
            "value": "container",
            "label": "t:sections.offer_banner.settings.width.options.boxed"
            },
            {
            "value": "container-full",
            "label": "t:sections.offer_banner.settings.width.options.full_width"
            }
        ],
        "default": "container"
    },
    {
      "type": "header",
      "content": "Tab Navigation Settings"
    },
    {
      "type": "select",
      "id": "title_font_size",
      "label": "Tab Title Font Size",
      "options": [
        {
          "value": "30",
          "label": "Small"
        },
        {
          "value": "36",
          "label": "Medium"
        },
        {
          "value": "48",
          "label": "Large"
        }
      ],
      "default": "36"
    },
    {
      "type": "select",
      "id": "title_font_weight",
      "label": "Tab Title Font Weight",
      "options": [
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "checkbox",
      "id": "title_uppercase",
      "label": "Transform titles to uppercase",
      "default": false
    },
    {
      "type": "range",
      "id": "tab_spacing",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Spacing between tabs",
      "default": 20
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "checkbox",
      "id": "show_navigation",
      "label": "Show prev/next buttons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_mobile_dots",
      "label": "Show dots on mobile",
      "default": true
    },
    {
      "type": "range",
      "id": "products_per_row_desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4,
      "label": "Products per row (Desktop)"
    },
    {
      "type": "range",
      "id": "products_per_row_tablet",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Products per row (Tablet)"
    },
    {
      "type": "range",
      "id": "products_per_row_mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2,
      "label": "Products per row (Mobile)"
    },
    {
      "type": "header",
      "content": "Product Settings"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Products to show"
    },
    {
        "type": "header",
        "content": "t:sections.all.padding.section_padding_heading"
    },
    {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 0
    },
    {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 0
    },
    {
      "type": "range",
      "id": "padding_mobile_rate",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "t:sections.top_bar.settings.padding_mobile_rate.label",
      "default": 75,
      "info": "t:sections.top_bar.settings.padding_mobile_rate.info"
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Collection Tab",
      "limit": 5,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Collection"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "product_list",
          "id": "product_list",
          "label": "Products",
          "info": "Selected products will override collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tag Products Carousel",
      "category": "Product",
      "blocks": [
        {
          "type": "tab",
          "settings": {
            "title": "What's Hot?",
            "collection": ""
          }
        },
        {
          "type": "tab",
          "settings": {
            "title": "Best Sellers",
            "collection": ""
          }
        },
        {
          "type": "tab",
          "settings": {
            "title": "Just Arrivals",
            "collection": ""
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% style %}
.section-{{ section.id }} .menu-tab-line .nav-tab-item {
  margin-right: {{ section.settings.tab_spacing }}px;
}
.section-{{ section.id }} .menu-tab-line .nav-tab-item:last-child {
  margin-right: 0;
}
.section-{{ section.id }} .menu-tab-line .tab-link {
  font-size: {{ section.settings.title_font_size }}px;
  font-weight: {{ section.settings.title_font_weight }};
  {% if section.settings.title_uppercase %}
    text-transform: uppercase;
  {% endif %}
}
.section-{{ section.id }}-padding {
      padding-top: calc({{ section.settings.padding_top }}px * {{ section.settings.padding_mobile_rate | divided_by: 100.0 }});
      padding-bottom: calc({{ section.settings.padding_bottom }}px * {{ section.settings.padding_mobile_rate | divided_by: 100.0 }});
    }
  
@media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    }
}
{% endstyle %}

<!-- Tag Product -->
<section class="section-{{ section.id }} color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
    <div class="{{ section.settings.width }}">
        {% if section.blocks.size > 0 %}
            <div class="flat-animate-tab flat-controltab-nav">
                <div class="flat-title">
                    <ul class="menu-tab-line style2 style-lg style-lg2" role="tablist">
                        {% for block in section.blocks %}
                            {% if block.type == 'tab' and block.settings.collection != blank or block.settings.product_list != blank %}
                                <li class="nav-tab-item" role="presentation">
                                    <a href="#tab-{{ block.id }}" 
                                       class="tab-link {% if forloop.first %}active{% endif %}" 
                                       data-bs-toggle="tab">
                                        {{ block.settings.title }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                <div class="tab-content sw-height">
                    {% for block in section.blocks %}
                        {% if block.type == 'tab' and block.settings.collection != blank or block.settings.product_list != blank %}
                            <div class="tab-pane {% if forloop.first %}active show{% endif %}" 
                                 id="tab-{{ block.id }}" 
                                 role="tabpanel">
                                <div dir="ltr" class="swiper tf-swiper" data-swiper='{
                                        "slidesPerView": {{ section.settings.products_per_row_mobile }},
                                        "spaceBetween": 12,
                                        "speed": 800,
                                        "observer": true,
                                        "observeParents": true,
                                        "slidesPerGroup": {{ section.settings.products_per_row_mobile }},
                                        "navigation": {
                                            "clickable": true,
                                            "nextEl": ".nav-next-{{ block.id }}",
                                            "prevEl": ".nav-prev-{{ block.id }}"
                                        },
                                        "pagination": { "el": ".sw-pagination-{{ block.id }}", "clickable": true },
                                        "breakpoints": {
                                        "768": { 
                                            "slidesPerView": {{ section.settings.products_per_row_tablet }}, 
                                            "spaceBetween": 12, 
                                            "slidesPerGroup": {{ section.settings.products_per_row_tablet }}
                                        },
                                        "1200": { 
                                            "slidesPerView": {{ section.settings.products_per_row_desktop }}, 
                                            "spaceBetween": 24, 
                                            "slidesPerGroup": {{ section.settings.products_per_row_desktop }}
                                        }
                                        }
                                    }'>
                                    <div class="swiper-wrapper">
                                        {% if block.settings.product_list != blank %}
                                            {% for product in block.settings.product_list %}
                                                <div class="swiper-slide">
                                                    {% render 'product-card', product: product %}
                                                </div>
                                            {% endfor %}
                                        {% else %}
                                            {% for product in block.settings.collection.products limit: section.settings.products_to_show %}
                                                <div class="swiper-slide">
                                                    {% render 'product-card', product: product %}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                    {% if section.settings.show_mobile_dots %}
                                        <div class="d-flex d-xl-none sw-dot-default sw-pagination-{{ block.id }} justify-content-center">
                                        </div>
                                    {% endif %}
                                </div>
                                {% if section.settings.show_navigation %}
                                    <div class="box-nav-swiper style-2">
                                        <div class="swiper-button-prev nav-swiper nav-prev-{{ block.id }} relative"></div>
                                        <div class="swiper-button-next nav-swiper nav-next-{{ block.id }} relative"></div>
                                    </div>
                                {% endif %}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
</section>
<!-- /Tag Product -->